<!DOCTYPE html>
<html lang="fr">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>PTF : The penetration tester framework | crowd42's blog</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/css/bootstrap-3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

    


    <link rel="shortcut icon" href="/images/favicon.ico">

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="feed/"> 

</head>


    <body>
      <div class="container">

        <header class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <h1 class="">crowd42's blog</h1>
    <p>
    <span class="reserved">char</span> nick[<span class="number">7</span>] = <span class="string">"crowd42"</span>;
    </p>
    <p>
    printf(<a href="https://github.com/crowd42" target="_blank"><span class="string">"https://github.com/<span class="reserved">%s\n</span>"</span></a>,nick);
    </p>

    <p>
    printf(<a href="https://mastodon.social/crowd42"
      target="_blank"><span class="string">"https://mastodon.social/<span class="reserved">%s\n</span>"</span></a>,nick);
    </p>

    <p>
    printf(<a href="https://keybase.io/crowd42"
      target="_blank"><span class="string">"https://keybase.io/<span class="reserved">%s\n</span>"</span></a>,nick);
    </p>


     <p>
    printf(<a href="https://twitter.com/crowd42"
      target="_blank"><span class="string">"https://twitter.com/<span class="reserved">%s\n</span>"</span></a>,nick);
    </p>

    <p>
    printf(<span class="string">"<span class="reserved">%s\x40</span>riseup<span class="reserved">\x2e\\\b</span>net<span class="reserved">\n</span>"</span>,nick);
    </p>
    <!-- <p>
            printf(<a href="https://crowd42.github.io" target="_blank"><span class="string">"https://<span class="reserved">%s</span>.github.io<span class="reserved">\n</span>"</span></a>,nick);
        </p> -->
    <p>
    puts(<a href="misc/pubkey.gpg.txt" target="_blank"><span
        class="string">"0xdc 5a6d b445 976d 60"</span></a>);
    </p>
  </div>
</header>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <div class="menu">
      <ul>
          <li><a href="/">home</a></li>
          <li><a href="/blog/">blog</a></li>
          <li> <a href="/astuces/">astuces</a></li>
          <li><a href="/books/">books</a></li>
          <li><a href="/casts">*casts</a></li>
          <li><a href="/movies">movies</a></li>
          <li><a href="/talks">talks</a></li>
          <li><a href="/zines">*zines</a></li>
          <li><a href="/ressources">ressources</a></li>
          <li><a href="/feed">feed</a></li>
          <li><a href="https://liberapay.com/~29921/donate">donate</a></li>
      </ul>
    </div>
  </div>
</div>



        <div class="row">
          <div class="col-lg-8 col-lg-offset-2">
            <main>
            <div class="post">

  <header class="post-header">
    <h1>PTF : The penetration tester framework</h1>
  </header>

  <article class="post-content">
  <div class="post">

  <header class="post-header">
    <p class="meta">
        Nov 7, 2017
        
        
        •
        <span><a href="/category/#ptf" class="reserved">ptf</a>,</span><span><a href="/category/#pentest" class="reserved">pentest</a>,</span><span><a href="/category/#penetration testing" class="reserved">penetration testing</a>,</span><span><a href="/category/#infosec" class="reserved">infosec</a>,</span><span><a href="/category/#debian" class="reserved">debian</a>,</span><span><a href="/category/#ubuntu" class="reserved">ubuntu</a>,</span><span><a href="/category/#arch linux" class="reserved">arch linux</a></span>
    </p>
  </header>

  <article class="post-content">
  <p>Pendant de nombreuses années, j’ai utilisé <a href="https://backbox.org">Backbox Linux [0]</a> sur mon laptop, pour ceux qui ne la connaissent pas, c’est une distribution GNU/Linux basée sur XUbuntu et orientée sécurité informatique (<a href="https://fr.wikipedia.org/wiki/Test_d'intrusion">tests d’intrusion [1]</a>,  <a href="https://fr.wikipedia.org/wiki/Science_forensique">forensics [2]</a>…). C’est un peu comme <a href="https://kali.org">kali Linux [3]</a> mais avec beaucoup moins de logiciels, ses développeurs ont choisi d’empaqueter que l’essentiel des outils et d’éviter d’avoir plus d’un logiciel dans la même catégorie, et je dois avouer que je n’ai jamais été déçu par cette distro.</p>

<p>Cependant, il y avait un seul souci : je ne pouvais plus utilisé Arch Linux comme OS principal. Bien évidemment, je pouvais l’installer en dual boot mais je déteste devoir redémarrer juste pour changer de distribution. J’avais le choix entre toutes les distros basées sur Arch Linux et destinées au penetration testing (Arch Assault, Blackarch pour ne citer qu’elles) mais je n’ai jamais été satisfait par elles, trop usine à gaz à mon gout. Jusqu’à ce que <a href="https://twitter.com/hackingdave">Dave Kennedy [4]</a> résout mon problème en publiant <a href="http://www.pentest-standard.org/index.php/Main_Page">The penetration tester framework [5]</a> ou PTF pour les intimes.</p>

<p>PTF est un script python qui permet d’installer facilement tout les logiciels dont vous aurez besoin pendant vos missions de test d’intrusion. Si vous avez utilisé par le passé backtrack, vous vous souvenez sans doute qu’on pouvait accéder à nos outils depuis le répertoire /pentest, c’était très agréable et bien utile d’avoir accès à eux de cette façon. PTF nous permet de retrouver ce fonctionnement. Les logiciels sont organisés selon le <a href="http://www.pentest-standard.org/index.php/Main_Page">Penetration Testing Execution Standard (PTES) [5]</a> (en gros, les logiciels sont organisés dans des catégories selon les phases d’un test d’intrusion).</p>

<p>Mais ce n’est pas tout ! PTF a deux autres avantages non négligeables, la façon dont sont organisés les logiciels permet de les mettre à jours tous en une seule commande. Le deuxième avantage c’est qu’un outil dont vous avez vous vous servez souvent ne se trouve pas parmi dans PTF, l’ajouter aux modules ne devrait pas vous prendre plus de deux minutes, on verra par la suite comment vous pouvez le faire.</p>

<p>PTF fonctionne avec Ubuntu, Archlinux, et Debian. Cependant, pour cette dernière il vaut mieux que vous utilisez la branche testing, certains logiciels, comme metasploit par exemple, exige des versions très récentes de leurs dépendances.</p>

<p>D’abord commencez par cloner le répertoire du projet depuis Github :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    $ git clone https://github.com/turstedsec/ptf
</code></pre></div></div>

<p>Déplacez vous dans le dossier que vous vous venez de cloner et lancer ptf avcec les droits root :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    $ cd ptf &amp;&amp; sudo python ptf
</code></pre></div></div>

<p><img src="/images/posts/2017/ptf.png" alt="screenshot ptf" title="ptf" /></p>

<p>Pour afficher tout les modules disponible, exécutez la commande <code class="language-plaintext highlighter-rouge">show modules</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ptf&gt; show modules
</code></pre></div></div>

<p>Pour installer tout les modules (outils):</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ptf&gt; use modules/install_update_all
    [*] You are about to install/update everything. Proceed? [yes/no]:no
    [*] Alright boss. Not installing right now. Tell me when. I want that shiny. I want it n
</code></pre></div></div>

<p>Cette commande comme vous l’aurez deviner, ne sert pas seulement à installer les logiciels, mais elle permet aussi de les mettre à jour quand vous le souhaitez.</p>

<p>Si vous ne voulez installer les modules que d’une catégorie en particulier :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ptf&gt; use modules/intelligence-gathering/install_update_all
</code></pre></div></div>

<p>vous pouvez aussi n’installer qu’un seul logiciel :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ptf&gt; search beef
    [*] Search results below:
    modules/exploitation/beef
    ptf&gt; use module/exploitation/beef
    ptf:(modules/exploitation/beef)&gt;install
</code></pre></div></div>

<p>Une fois que vos outils sont installés, vous pouvez les lancer depuis n’importe où dans un terminal. Pour voir et listez tout les logiciels installés, allez dans le répertoire /pentest.</p>

<p>Pour mettre à jour vos outils sans passer par le module <code class="language-plaintext highlighter-rouge">install_update_all</code> :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ptf&gt; use module/update_installed
</code></pre></div></div>

<p>Maintenant supposons qu’un des outils que vous utilisez ne figure pas parmi ceux embarqués par défaut dans PTF, ce n’est pas grave, car en ajouter un est vraiment à la porte de n’importe qui. Tout ce que vous avez à faire c’est de copier un des module depuis <code class="language-plaintext highlighter-rouge">$PATH/ptf/modules/</code> et de le modifier selon les besoins de votre outils. Le fichier de configuration est très bien <a href="http://github.com/trustedsec/ptf">commenté et documenté sur le README [6]</a>, vous n’aurez aucun mal à le comprendre.</p>

<p>Pour vous illustrer à quel point c’est simple, on va ajouter <a href="https://github.com/UltimateHackers/XSStrike">XSStrike [7]</a>. C’est un programme que j’ai choisi au hasard, j’aurai pu choisir n’importe quel autre outil, ça n’aurait rien changé. XSStrike  permet de faire d’auditer un site à la recherche de failles XSS, on va donc le sauvegarder dans <code class="language-plaintext highlighter-rouge">$PATH/ptf/modules/vulnerability-analysis/xsstrike.py</code>.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1">#!/usr/bin/env python
#####################################
# Installation module for XSStrike
#####################################
</span>
<span class="c1"># AUTHOR OF MODULE NAME
</span><span class="n">AUTHOR</span><span class="o">=</span><span class="s">"crowd42"</span>

<span class="c1"># DESCRIPTION OF THE MODULE
</span><span class="n">DESCRIPTION</span><span class="o">=</span><span class="s">"This module will install/update XSStrike, a python script designed to detect and exploit XSS vulnerabilities"</span>

<span class="c1"># INSTALL TYPE GIT, SVN, FILE DOWNLOAD
# OPTIONS = GIT, SVN, FILE
</span><span class="n">INSTALL_TYPE</span><span class="o">=</span><span class="s">"GIT"</span>

<span class="c1"># LOCATION OF THE FILE OR GIT/SVN REPOSITORY
</span><span class="n">REPOSITORY_LOCATION</span><span class="o">=</span><span class="s">"https://github.com/UltimateHackers/XSStrike/"</span>

<span class="c1"># DEPENDS FOR DEBIAN INSTALLS
</span><span class="n">DEBIAN</span><span class="o">=</span><span class="s">"git python-mechanize python-pip""

# DEPENDS FOR FEDORA INSTALLS
FEDORA="</span><span class="n">git</span> <span class="n">python</span><span class="o">-</span><span class="n">mechanize</span> <span class="n">python</span><span class="o">-</span><span class="n">pip</span><span class="s">""</span>

<span class="c1"># WHERE DO YOU WANT TO INSTALL IT
</span><span class="n">INSTALL_LOCATION</span><span class="o">=</span><span class="s">"xsstrike"</span>

<span class="c1"># COMMANDS TO RUN AFTER
</span><span class="n">AFTER_COMMANDS</span><span class="o">=</span><span class="s">"cd {INSTALL_LOCATION}, pip2 install -r requirements.txt, chmod +x xsstrike"</span>

<span class="c1"># THIS WILL CREATE AN AUTOMATIC LAUNCHER FOR THE TOOL
</span><span class="n">LAUNCHER</span><span class="o">=</span><span class="s">"xsstrike"</span></code></pre></figure>

<p>Dans un premier temps nous indiquons le nom/pseudo de l’auteur du module (la constante AUTHOR), ensuite on donne une courte description du module et ainsi de suite. Une fois que vous avez fini de configurer votre module, vous l’exécuter depuis ptf.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ptf&gt; use module/vulnerability-analysis/xsstrike
    ptf:(modules/vulnerability-analysis/xsstrike)&gt; install
</code></pre></div></div>

<p><img src="/images/posts/2017/xsstrike_installation.png" alt="screenshot xsstrike install" title="ptfi xsstrike" /></p>

<p>Maintenant vous pouvez lancer WSStrile depuis votre terminal :-)</p>

<h3 id="liens">Liens</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[0]: https://backbox.org
[1]: https://fr.wikipedia.org/wiki/Test_d'intrusion
[2]: https://fr.wikipedia.org/wiki/Science_forensique
[3]: https://kali.org
[4]: https://twitter.com/hackingdave
[5]: http://www.pentest-standard.org/index.php/Main_Page
[6]: http://github.com/trustedsec/ptf
[7]: https://github.com/UltimateHackers/XSStrike
</code></pre></div></div>


  </article>
   

    
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
                
                <h1>Sur le même sujet</h1>
                <ul>
                
                <li>
                    <a href="http://localhost:4000/blog/microsoft-mots-de-passe-toute-une-histoire/">Microsoft et les mots de passe, toute une histoire
                    
                    </a>
                </li>
                
                
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
            
                
                <li>
                    <a href="http://localhost:4000/-blog/script-python-sites-web-meme-adresse-ip/">Un petit script pour récupérer les URLs des sites web hébergés sur la même adresse IP
                    
                    </a>
                </li>
                
                
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
            
                
                <li>
                    <a href="http://localhost:4000/blog/windows-credential-guard-mimikatz/">Windows Credential Guard et Mimikatz
                    
                    </a>
                </li>
                
                
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
            
                
                <li>
                    <a href="http://localhost:4000/blog/meltdown-spectre/">Deux points qui me tracassent à propos de meltdown et spectre
                    
                    </a>
                </li>
                
                
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
            
                
                <li>
                    <a href="http://localhost:4000/blog/full-disclosure-etihad-airways/">Full Disclosure : Des emails et mots de passe de la compagnie aérienne Etihad Airways dans l'air
                    
                    </a>
                </li>
                
                
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
                
                <li>
                    <a href="http://localhost:4000/comment-jai-pu-gagner-acces-administrateur-serveur-windows-grace-google/">Comment j'ai pu gagner un accès administrateur sur un serveur Windows 2012 grâce à Google
                    
                    </a>
                </li>
                
                
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    


    </ul>


	<p class="feed-recomendation">
		Si vous avez aimé ce billet, vous pouvez vous inscrire au <a href="feed/">flux RSS</a> !
	</p>

  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'crowd42s-blog-1';
    var disqus_config = function () {
        this.page.identifier = "/blog/ptf/";
    };
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




</div>

  </article>

</div>

            </main>
          </div>
        </div>

        <div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <footer>
      Propulsé fièrement par Jekyll!
    </footer>
  </div>
</div>


      </div>
    </body>
</html>
